–∏ —Ç–∞–∫ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞:
site/ (–∫–æ—Ä–Ω–µ–≤–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –ø—Ä–æ–µ–∫—Ç–∞)
‚îú‚îÄ‚îÄ __init__.py              # –ü—É—Å—Ç–æ–π —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ app.py                 # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ database.py            # –§–∞–π–ª –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö (–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è, –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ)
‚îú‚îÄ‚îÄ auth.py                # –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (–ª–æ–≥–∏–Ω, –ª–æ–≥–∞—É—Ç)
‚îú‚îÄ‚îÄ profile.py             # –ü—Ä–æ—Ñ–∏–ª–∏ (–ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è, —É—á–µ–Ω–∏–∫–∞)
‚îú‚îÄ‚îÄ chat.py                # –ß–∞—Ç (WebSocket –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏, HTTP –º–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è –∞–¥–º–∏–Ω–∫–∏)
‚îú‚îÄ‚îÄ achievements.py        # –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ)
‚îú‚îÄ‚îÄ static/                # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
‚îÇ   ‚îú‚îÄ‚îÄ css/               # –°—Ç–∏–ª–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dark.css
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ light.css
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ shared.css
‚îÇ   ‚îú‚îÄ‚îÄ js/                # JavaScript
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ main.js
‚îÇ   ‚îú‚îÄ‚îÄ img/               # –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ profile/               # –§–æ—Ç–æ –ø—Ä–æ—Ñ–∏–ª—è –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ achievements/          # –§–æ—Ç–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ students/              # –§–æ—Ç–æ —É—á–µ–Ω–∏–∫–æ–≤
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ students_achievements/ # –§–æ—Ç–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π —É—á–µ–Ω–∏–∫–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ chat_files/        # –§–∞–π–ª—ã —á–∞—Ç–∞ (–∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)
‚îî‚îÄ‚îÄ templates/             # –®–∞–±–ª–æ–Ω—ã
    ‚îú‚îÄ‚îÄ login.html         # –°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—Ö–æ–¥–∞
    ‚îú‚îÄ‚îÄ admin_panel.html   # –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
    ‚îú‚îÄ‚îÄ sections/          # –ü–æ–¥–∫–ª—é—á–∞–µ–º—ã–µ —Å–µ–∫—Ü–∏–∏
    ‚îÇ   ‚îú‚îÄ‚îÄ achievements.html  # –°–µ–∫—Ü–∏—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è
    ‚îÇ   ‚îú‚îÄ‚îÄ personal.html      # –õ–∏—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è
    ‚îÇ   ‚îú‚îÄ‚îÄ students.html      # –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è —É—á–µ–Ω–∏–∫–æ–≤
    ‚îÇ   ‚îî‚îÄ‚îÄ student_profil.html# –ü—Ä–æ—Ñ–∏–ª—å —É—á–µ–Ω–∏–∫–∞
    ‚îú‚îÄ‚îÄ base.html          # –ë–∞–∑–æ–≤—ã–π —à–∞–±–ª–æ–Ω
    ‚îú‚îÄ‚îÄ index.html         # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
    ‚îî‚îÄ‚îÄ error.html         # –°—Ç—Ä–∞–Ω–∏—Ü–∞ –æ—à–∏–±–∫–∏
—Å—É—Ç—å –ø—Ä–æ–µ–∫—Ç–∞ –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —É–¥–æ–±–Ω–æ–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–∏ —É—á–µ–Ω–∏–∫–æ–≤ –∏ –æ–¥–Ω–æ–≥–æ —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä–∞,–¥–ª—è –∫–æ—Ç–æ—Ä–æ–≥–æ —ç—Ç–æ—Ç —Å–∞–π—Ç –∏ —Å–æ–∑–¥–∞—ë—Ç—Å—è
–Ω–∞ —Å–∞–π—Ç–µ –µ—Å—Ç—å 3 —Ä–æ–ª–∏ (–ø–æ–∫–∞ —á—Ç–æ):
–∞–¥–º–∏–Ω—ã (–æ–Ω –ø–æ–∫–∞ 1): –±–µ–∑ –ø—Ä–æ–±–ª–µ–º –º–æ–≥—É—Ç –∑–∞–π—Ç–∏ –Ω–∞ –ª—é–±—É—é –∏–∑ —Å—Ç—Ä–∞–Ω–∏—á–µ–∫ —Å–∞–π—Ç–∞ –±–æ–ª–µ–µ —Ç–æ–≥–æ, –µ—Å—Ç—å —Å–µ–∫—Ä–µ—Ç–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—á–∫–∞, –Ω–∞ –∫–æ—Ç–æ—Ä—É—é –º–æ–∂–µ—Ç –∑–∞–π—Ç–∏ —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω. –æ–Ω–∏, —Ç–∞–∫-–∂–µ –º–æ–≥—É—Ç –º–µ–Ω—è—Ç—å –≤—Å—ë, —á—Ç–æ –º–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å –∫—Ç–æ-–ª–∏–±–æ –¥—Ä—É–≥–æ–π –∏ –∏–º–µ—é—Ç –¥–æ—Å—Ç—É–ø –∫ —Å–µ–∫—Ä–µ—Ç–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—á–∫–µ –¥–ª—è –∞–¥–º–∏–Ω–æ–≤, –≤ –∫–æ—Ç –æ—Ä–æ–π –º–æ–≥—É—Ç –∏—Å–∫–∞—Ç—å —É–µ–Ω–∏–∫–æ–≤ –ø–æ –∏—Ö –ª–æ–≥–∏–Ω–∞–º (—á—Ç–æ-–±—ã –∑–∞—Ö–æ–¥–∏—Ç—å –Ω–∞ –∏—Ö –ø—Ä–æ—Ñ–∏–ª—å –∏ –ø—Ä–∏ –Ω–∞–¥–æ–±–Ω–æ—Å—Ç–∏ —á—Ç–æ-—Ç–æ –≤ –ø—Ä–æ—Ñ–∏–ª–µ –º–µ–Ω—è—Ç—å) –∏ –æ—Ç–≤–µ—á–∞—Ç—å –≤ —á–∞—Ç–∞—Ö —É—á–µ–Ω–∏–∫–∞–º.
—É—á–µ–Ω–∏–∫–∏: –º–æ–≥—É—Ç –∑–∞–π—Ç–∏ —Ç–æ–ª—å–∫–æ –Ω–∞ 3 —Å—Ç—Ä–∞–Ω–∏—á–∫–∏ (–ø—Ä–æ—Ñ–∏–ª—å —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä–∞, —Å–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å (–æ–Ω–∏ —Ç–∞–∫-–∂–µ –º–æ–≥—É—Ç –º–µ–Ω—è—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ —Å–≤–æ—ë–º –ø—Ä–æ—Ñ–∏–ª–µ) –∏ —Å—Ç—Ä–∞–Ω–∏—á–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏). —Ç–∞–∫-–∂–µ –º–æ–≥—É—Ç –≤—Å—ë, —á—Ç–æ –º–æ–≥—É—Ç –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –∫—Ä–æ–º–µ –≤—Ö–æ–¥–∞ –≤ –∞–∫–∫–∞—É–Ω—Ç. –≤–º–µ—Å—Ç–æ –∫–Ω–æ–ø–∫–∏ "–≤–æ–π—Ç–∏", —É —É—á–µ–Ω–∏–∫–æ–≤ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∫–Ω–æ–ø–∫–∞ "–≤—ã–π—Ç–∏" (—É –∞–¥–º–∏–Ω–æ–≤, –∫—Å—Ç–∞—Ç–∏, —Ç–æ–∂–µ).
–Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏: –º–æ–≥—É—Ç –≤–∏–¥–µ—Ç—å —Ç–æ–ª—å–∫–æ –ø—Ä–æ—Ñ–∏–ª—å —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä–∞, –º–µ–Ω—è—Ç—å —Ç–µ–º—É —Å–∞–π—Ç–∞ –¥–ª—è —Å–µ–±—è, –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –ø–æ —Ä–∞–∑–¥–µ–ª–∞–º –≤ –ø—Ä–æ—Ñ–∏–ª–µ —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä–∞ –∏ –º–æ–≥—É—Ç –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è (—Ç–µ–º —Å–∞–º—ã–º —Å—Ç–∞–≤ –ª–∏–±–æ —É—á–µ–Ω–∏–∫–æ–º, –ª–∏–±–æ –∞–¥–º–∏–Ω–æ–º).
–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º: –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –ø–æ –∫–Ω–æ–ø–∫–µ "–≤–æ–π—Ç–∏" –∏ –µ–≥–æ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—á–∫—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏. –Ω–∞ –Ω–µ–π –æ–Ω –≤–∏–¥–∏—Ç –ø–æ–ª–µ –≤–≤–æ–¥–∞ –ª–æ–≥–∏–Ω–∞ –∏ –∫–Ω–æ–ø–∫—É –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ª–æ–≥–∏–Ω–∞. –µ—Å–ª–∏ –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–µ–¥—ë—Ç –ª–æ–≥–∏–Ω, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç –∞–¥–º–∏–Ω—É –∏ –Ω–∞–∂–º—ë—Ç –Ω–∞ –∫–Ω–æ–ø–∫—É –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ª–æ–≥–∏–Ω–∞, –≤ —Å–∏—Å—Ç–µ–º–µ, –æ–Ω –∏–∑ –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å—Ç–∞–Ω–µ—Ç —É—á–µ–Ω–∏–∫–æ–º. –µ—Å–ª–∏ –æ–Ω –≤ –ø–æ–ª–µ –≤–≤–æ–¥–∞ –ª–æ–≥–∏–Ω–∞ –Ω–∞–ø–∏—à–µ—Ç –ª–æ–≥–∏–Ω –æ–¥–Ω–æ–≥–æ –∏–∑ –∞–¥–º–∏–Ω–æ–≤ (–Ω–∞ —Å–µ–≥–æ–¥–Ω—è—à–Ω–∏–π –º–æ–º–µ–Ω—Ç - zavric228), —Å –Ω–∏–∑—É –ø–æ–ª—è –≤–≤–æ–¥–∞ –ª–æ–≥–∏–Ω–∞ –¥–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è (–±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã), –ø–æ–ª–µ –¥–ª—è –≤–≤–æ–¥–∞ –ø–∞—Ä–æ–ª—è. —á—Ç–æ-–±—ã –≤–æ–π—Ç–∏, –∫–∞–∫ –∞–¥–º–∏–Ω, –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –Ω—É–∂–Ω–æ –≤–≤–µ—Å—Ç–∏ –≤ –ø–æ–ª–µ –≤–≤–æ–¥–∞ –ø–∞—Ä–æ–ª—è –ø–∞—Ä–æ–ª—å "12345679" (–ø–æ–∑–∂–µ —è –ø–æ–º–µ–Ω—è—é —ç—Ç–æ—Ç –ø–∞—Ä–æ–ª—å, –Ω–æ —É–∂–µ –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã –Ω–∞–¥ –ø—Ä–æ–µ–∫—Ç–æ–º).
–∞–¥–º–∏–Ω—ã –¥–æ–ª–∂–Ω—ã –º–æ—á—å –¥–æ–±–∞–≤–ª—è—Ç—å/—É–¥–∞–ª—è—Ç—å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è —É—á–µ–Ω–∏–∫–æ–≤ (—Ç–æ–≥–¥–∞ –¥–æ–±–∞–≤–ª–µ–Ω–Ω–æ–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ –ø–æ—è–≤–∏—Ç—Å—è –≤ —Ä–∞–∑–¥–µ–ª–µ "–¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –º–æ–∏—Ö —É—á–µ–Ω–∏–∫–æ–≤" –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—á–∫–µ –ø—Ä–æ—Ñ–∏–ª—è —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä–∞ –∏ –≤ —Ä–∞–∑–¥–µ–ª–µ "–º–æ–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è" –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—á–∫–µ –ø—Ä–æ—Ñ–∏–ª—è —É—á–µ–Ω–∏–∫–∞, –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ –∫–æ—Ç–æ—Ä–æ–≥–æ –±—ã–ª–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ). —Ç–∞–∫-–∂–µ –∞–¥–º–∏–Ω—ã –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–æ–±–∞–≤–ª—è—Ç—å/—É–¥–∞–ª—è—Ç—å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –≤ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä–∞ (—Ä–∞–∑–¥–µ–ª "–º–æ–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—á–∫–µ –ø—Ä–æ—Ñ–∏–ª—è —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä–∞"). –∫–∞–∫ —ç—Ç–æ –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å: –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –∑–∞—Ö–æ–¥–∏—Ç –≤ —Ä–∞–∑–¥–µ–ª, –≤ –Ω–∞–∑–≤–∞–Ω–∏–∏ –∫–æ—Ç–æ—Ä–æ–≥–æ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Å–ª–æ–≤–æ "–¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è" –∏ –≤ –Ω–∏–∑—É —Ä–∞–∑–¥–µ–ª–∞, –ø–æ–¥ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è–º–∏ (–∏–ª–∏ –∏—Ö –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ–º) –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (–∏ —Ç–æ–ª—å–∫–æ –¥–ª—è –Ω–µ–≥–æ) –¥–æ–ª–∂–Ω–∞ –≤–∏–¥–Ω–µ—Ç—å—Å—è –ø–æ–ª–µ –≤–≤–æ–¥–∞ –æ–ø–∏—Å–∞–Ω–∏—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è, –ø–æ–ª–µ –≤–≤–æ–¥–∞ –¥–ª—è –ª–æ–≥–∏–Ω–∞, –∫–æ–≥–æ —ç—Ç–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ (—Ç—É–¥–∞ –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å —Å–ª–æ–≤–æ "—Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä", –∏ —Ç–æ–≥–¥–∞ —ç—Ç–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ –ø–æ—è–≤–∏—Ç—Å—è –≤ —Ä–∞–∑–¥–µ–ª–µ "–º–æ–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è" –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—á–∫–µ –ø—Ä–æ—Ñ–∏–ª—è —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä–∞) –∏ —Ñ–æ—Ä–º–∞ –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–∏—è —Ñ–∞–π–ª–∞ (–ø–æ–∫–∞ —á—Ç–æ –ø—Ä–∏–∫—Ä–µ–ø–ª—è—Ç—å —Ñ–∞–π–ª –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ), –∞ –∏–º–µ–Ω–Ω–æ —Ñ–æ—Ç–æ/—ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –¥–∏–ø–ª–æ–º–∞. –∫–∞–∫ —Ç—ã –º–æ–≥ –ø–æ–Ω—è—Ç—å, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Ç–æ–≥–æ, –Ω–∞ –∫–∞–∫–æ–π —Å—Ç—Ä–∞–Ω–∏—á–∫–µ –±—ã–ª–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ, –æ–Ω–æ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ "–¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –º–æ–∏—Ö —É—á–µ–Ω–∏–∫–æ–≤" (–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—á–∫–µ –ø—Ä–æ—Ñ–∏–ª—è —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä–∞) –∏ –≤ "–º–æ–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è" (–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—á–∫–µ –≤–ª–∞–¥–µ–ª—å—Ü–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è) –≤ —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –≤ –ø–æ–ª–µ –≤–≤–æ–¥–∞, –∫–æ–≥–æ —ç—Ç–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ –Ω–µ –±—ã–ª–æ —É–∫–∞–∑–∞–Ω–æ "—Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä" –∏ —Ç–æ–ª—å–∫–æ –≤ —Ä–∞–∑–¥–µ–ª "–º–æ–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è" (—Å—Ç—Ä–∞–Ω–∏—á–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä–∞) –≤ –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ.
–ø—Ä–∏–º–µ—Ä–Ω–æ –æ–ø–∏—à—É —Å—Ç—Ä–∞–Ω–∏—á–∫—É –ø—Ä–æ—Ñ–∏–ª—è —É—á–µ–Ω–∏–∫–∞: –æ–Ω–∞ –ø–æ—á—Ç–∏ —Ç–∞–∫–∞—è-–∂–µ, –∫–∞–∫ –∏ —Å—Ç—Ä–∞–Ω–∏—á–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä–∞, –∑–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ —Ç–æ–≥–æ, —á—Ç–æ –Ω–∞ –º–µ—Å—Ç–µ –∫–Ω–æ–ø–∫–∏ –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –≤ –ø—Ä–æ—Ñ–∏–ª—å —É—á–∏—Ç–µ–ª—è, –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∫–Ω–æ–ø–∫–∞ –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –≤ –ø—Ä–æ—Ñ–∏–ª—å —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä–∞ (–≤–º–µ—Å—Ç–æ —Ñ–æ—Ç–æ —É—á–µ–Ω–∏–∫–∞, —Ñ–æ—Ç–æ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è (—è –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É—é, —á—Ç–æ —Ñ–æ—Ç–æ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è —Ö—Ä–∞–Ω–∏—Ç—Å—è –ø–æ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏—é static/img/profil/photo.jpg) –≤–º–µ—Å—Ç–æ —Ä–∞–∑–¥–µ–ª–∞ ¬´–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è —É—á–µ–Ω–∏–∫–æ–≤¬ª —Ä–∞–∑–¥–µ–ª ¬´–ß–∞—Ç —Å —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä–æ–º¬ª. –í —Ä–∞–∑–¥–µ–ª–µ ¬´–ú–æ–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è¬ª –≤ –ø—Ä–æ—Ñ–∏–ª–µ —É—á–µ–Ω–∏–∫–∞ –¥–æ–ª–∂–Ω—ã —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è —ç—Ç–æ–≥–æ —É—á–µ–Ω–∏–∫–∞ (–∏–ª–∏ –∏—Ö –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ)).
—Å—Ö–µ–º–∞ —Ä–∞–±–æ—Ç—ã —Å –Ω–æ–≤—ã–º–∏ –∏ —Å—Ç–∞—Ä—ã–º–∏ —É—á–µ–Ω–∏–∫–∞–º–∏ –ø—Ä–æ—Å—Ç–∞: –µ—Å–ª–∏ —É—á–µ–Ω–∏–∫ —Ä–∞–Ω–µ–µ –Ω–µ —É–ø–æ–º–∏–Ω–∞–ª—Å—è (—Ç–æ-–µ—Å—Ç—å –Ω–µ—Ç—É –∑–∞–ø–∏—Å–µ–π –æ –Ω—ë–º –≤ –±–∞–∑–∞—Ö –¥–∞–Ω–Ω—ã—Ö), –ø—Ä–∏ –ø–µ—Ä–≤–æ–º —É–ø–æ–º–∏–Ω–∞–Ω–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –∏–ª–∏ –ø—Ä–∏ –≤—Ö–æ–¥–µ —ç—Ç–æ–≥–æ —É—á–µ–Ω–∏–∫–∞ –≤ –ø–µ—Ä–≤—ã–π —Ä–∞–∑ –Ω–∞ —Å–∞–π—Ç), —Å–æ–∑–¥–∞—é—Ç—Å—è –∑–∞–ø–∏—Å–∏ –≤ –±–∞–∑–∞—Ö –¥–∞–Ω–Ω—ã—Ö (–∏–∑–Ω–∞—á–∞–ª—å–Ω–æ —Ç–æ–ª—å–∫–æ –µ–≥–æ –∏–º—è (–ª–æ–≥–∏–Ω) –∏ —Ñ–æ—Ç–æ –Ω–∞ –∞–≤–∞—Ç–∞—Ä–∫—É (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é nkvtf.jpg), –∫–æ—Ç–æ—Ä–æ–µ —É—á–µ–Ω–∏–∫ –º–æ–∂–µ—Ç –≤ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏–∏ –∑–∞–º–µ–Ω–∏—Ç—å –∏ –ø—É—Å—Ç–æ–µ –ø–æ–ª—è –¥–ª—è –≤–≤–æ–¥–∞ –ª–∏—á–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—É—é —É—á–µ–Ω–∏–∫ —Ç–∞–∫-–∂–µ —Å–º–æ–∂–µ—Ç –≤ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏–∏ –∑–∞–º–µ–Ω–∏—Ç—å) –∏ –Ω–æ–≤—ã–π —á–∞—Ç (–æ–¥–∏–Ω –∫–æ–Ω–µ—Ü –≤ –ø—Ä–æ—Ñ–∏–ª–µ —É—á–µ–Ω–∏–∫–∞, –¥—Ä—É–≥–æ–π –∫–æ–Ω–µ—Ü - –æ–¥–∏–Ω –∏–∑ –≤–æ–∑–º–æ–∂–Ω—ã—Ö —á–∞—Ç–æ–≤ –≤ —Å–µ–∫—Ä–µ—Ç–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—á–∫–µ –¥–ª—è –∞–¥–º–∏–Ω–æ–≤). –Ω–æ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º. –µ—Å–ª–∏ –¥–ª—è —É—á–µ–Ω–∏–∫–∞ —É–∂–µ —Å–æ–∑–¥–∞–Ω —á–∞—Ç –∏ –∑–∞–ø–∏—Å–∏ –≤ –±–∞–∑–∞—Ö –¥–∞–Ω–Ω—ã—Ö, –æ–Ω –ø—Ä–æ—Å—Ç–æ –ø–æ–ª—É—á–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫ —ç—Ç–æ–º—É —á–∞—Ç—É –∏ –ø—Ä–æ—Ñ–∏–ª—é —É—á–µ–Ω–∏–∫–∞ —Å –ª–æ–≥–∏–Ω–æ–º, –∫–æ—Ç–æ—Ä—ã–π –≤–≤—ë–ª.
—á–∞—Ç –Ω—É–∂–µ–Ω –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ–º–∞—à–Ω–µ–≥–æ –∑–∞–¥–∞–Ω–∏—è —É—á–µ–Ω–∏–∫–∞ —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä–æ–º, –ø–æ—ç—Ç–æ–º—É —á–µ—Ä–µ–∑ –Ω–µ–≥–æ –º–æ–∂–Ω–æ –ø–µ—Ä–µ—Å—ã–ª–∞—Ç—å —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –∫–∞—Ä—Ç–∏–Ω–∫–∏.
—ç—Ç–æ –≤ –∫—Ä–∞—Ç—Ü–µ –æ–ø–∏—Å—ã–≤–∞–µ—Ç –º–æ–π —Å–∞–π—Ç, –Ω–æ —è –º–æ–≥ —á—Ç–æ-—Ç–æ —É–ø—É—Å—Ç–∏—Ç—å. –≤ –Ω–∏–∑—É –æ—Ç–ø—Ä–∞–≤–∏–ª —Ñ–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞. –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Ñ–∞–π–ª—ã –º–æ–≥—É—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞—Ç—å –∏ —ç—Ç–æ —Ç–æ–∂–µ —è–≤–ª—è–µ—Ç—Å—è –æ—à–∏–±–∫–æ–π.

achievements.py:
from flask import Blueprint, session, request, redirect, url_for, flash, current_app
from werkzeug.utils import secure_filename
from database import get_db, allowed_file

achievements_bp = Blueprint('achievements', __name__)

@achievements_bp.route('/add_achievement', methods=['POST'])
def add_achievement():
    if 'user' not in session or not session.get('is_admin', False):
        abort(403)
    
    if 'image' not in request.files or request.files['image'].filename == '':
        flash('–§–∞–π–ª –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω', 'error')
        return redirect(url_for('index'))
    
    file = request.files['image']
    if not allowed_file(file.filename):
        flash('–ù–µ–¥–æ–ø—É—Å—Ç–∏–º—ã–π —Ñ–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞', 'error')
        return redirect(url_for('index'))
    
    info = request.form['info']
    student_username = request.form.get('student_username', '').strip()
    is_student = 1
    student_id = None

    if student_username.lower() == '—Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä':
        is_student = 0
    else:
        db = get_db()
        student = db.execute(
            'SELECT id FROM students WHERE username = ?', 
            (student_username,)
        ).fetchone()
        
        if not student:
            db.execute('INSERT INTO students (username) VALUES (?)', (student_username,))
            db.commit()
            student = db.execute(
                'SELECT id FROM students WHERE username = ?', 
                (student_username,)
            ).fetchone()
        
        student_id = student['id']

    filename = secure_filename(file.filename)
    upload_folder = (
        current_app.config['UPLOAD_FOLDER_STUDENTS_ACHIEVEMENTS'] 
        if is_student 
        else current_app.config['UPLOAD_FOLDER_ACHIEVEMENTS']
    )
    file.save(os.path.join(upload_folder, filename))

    db = get_db()
    db.execute('''
        INSERT INTO achievements 
        (user_id, image, info, is_student, student_id) 
        VALUES (1, ?, ?, ?, ?)
    ''', (filename, info, is_student, student_id))
    db.commit()
    flash('–î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ', 'success')
    return redirect(url_for('index'))

@achievements_bp.route('/delete_achievement/<int:id>', methods=['POST'])
def delete_achievement(id):
    if 'user' not in session or not session.get('is_admin', False):
        abort(403)
    
    db = get_db()
    achievement = db.execute('SELECT * FROM achievements WHERE id = ?', (id,)).fetchone()
    
    if not achievement:
        flash('–î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ', 'error')
        return redirect(url_for('index'))
    
    upload_folder = (
        current_app.config['UPLOAD_FOLDER_STUDENTS_ACHIEVEMENTS'] 
        if achievement['is_student'] 
        else current_app.config['UPLOAD_FOLDER_ACHIEVEMENTS']
    )
    file_path = os.path.join(upload_folder, achievement['image'])
    
    if os.path.exists(file_path) and achievement['image'] != 'default_achievement.jpg':
        os.remove(file_path)
    
    db.execute('DELETE FROM achievements WHERE id = ?', (id,))
    db.commit()
    flash('–î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–æ', 'success')
    return redirect(url_for('index'))

app.py:
from flask import Flask, redirect, url_for, session, render_template, request, flash, abort
from flask_socketio import SocketIO, emit
import os
import time
from database import init_db, get_db, allowed_file
from auth import auth_bp
from profile import profile_bp
from chat import chat_bp
from achievements import achievements_bp

app = Flask(__name__)
app.secret_key = os.urandom(24)
app.config.update(
    UPLOAD_FOLDER_PROFILE='static/img/profile',
    UPLOAD_FOLDER_ACHIEVEMENTS='static/img/achievements',
    UPLOAD_FOLDER_STUDENTS_ACHIEVEMENTS='static/img/students_achievements',
    DATABASE='database.db',
    ALLOWED_EXTENSIONS={'png', 'jpg', 'jpeg'},
    MAX_CONTENT_LENGTH=20 * 1024 * 1024,
    TEMPLATES_AUTO_RELOAD=True
)

socketio = SocketIO(app, cors_allowed_origins="*")

# –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è Blueprint
app.register_blueprint(auth_bp)
app.register_blueprint(profile_bp)
app.register_blueprint(chat_bp)
app.register_blueprint(achievements_bp)

@app.route('/')
def index():
    db = get_db()
    profile = db.execute('SELECT * FROM profile WHERE user_id = 1').fetchone()
    achievements = db.execute('SELECT * FROM achievements WHERE is_student = 0').fetchall()
    student_achievements = db.execute('''
        SELECT a.*, s.username as student_name 
        FROM achievements a
        LEFT JOIN students s ON a.student_id = s.id
        WHERE a.is_student = 1
    ''').fetchall()

    return render_template('index.html',
        profile=dict(profile) if profile else {},
        achievements=achievements,
        student_achievements=student_achievements,
        is_admin=session.get('is_admin', False),
        logged_in='user' in session
    )

@app.errorhandler(403)
def forbidden(e):
    return render_template('error.html', error={'code': 403, 'info': '–î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω'}), 403

@app.errorhandler(404)
def not_found(e):
    return render_template('error.html', error={'code': 404, 'info': '–°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞'}), 404

@app.errorhandler(500)
def internal_error(e):
    return render_template('error.html', error={'code': 500, 'info': '–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞'}), 500

@socketio.on('connect')
def handle_connect():
    if 'user' in session:
        emit('user_connected', {
            'username': session['user'],
            'is_admin': session.get('is_admin', False)
        })

@socketio.on('message')
def handle_message(data):
    if 'user' not in session:
        return
    
    file_url = None
    if 'file' in data:
        filename = f"{session['user']}_{int(time.time())}.{data['file']['ext']}"
        filepath = os.path.join('static/chat_files', filename)
        with open(filepath, 'wb') as f:
            f.write(data['file']['data'])
        file_url = f"/static/chat_files/{filename}"

    db = get_db()
    db.execute('INSERT INTO messages (sender, text, file) VALUES (?, ?, ?)', 
              (session['user'], data['text'], file_url))
    db.commit()

    emit('new_message', {
        'text': data['text'],
        'file': file_url,
        'sender': session['user'],
        'timestamp': time.strftime('%Y-%m-%d %H:%M:%S')
    }, broadcast=True)

if __name__ == '__main__':
    os.makedirs(app.config['UPLOAD_FOLDER_PROFILE'], exist_ok=True)
    os.makedirs(app.config['UPLOAD_FOLDER_ACHIEVEMENTS'], exist_ok=True)
    os.makedirs(app.config['UPLOAD_FOLDER_STUDENTS_ACHIEVEMENTS'], exist_ok=True)
    os.makedirs('static/chat_files', exist_ok=True)
    
    if not os.path.exists(app.config['DATABASE']):
        init_db(app)
    
    socketio.run(app, host='0.0.0.0', port=5000, debug=True, allow_unsafe_werkzeug=True)

auth.py:
from flask import Blueprint, session, request, redirect, url_for, flash, render_template
from database import get_db

auth_bp = Blueprint('auth', __name__)

@auth_bp.route('/login', methods=['GET', 'POST'])
def login():
    if request.method == 'POST':
        username = request.form['username']
        password = request.form.get('password', '')
        
        db = get_db()
        user = db.execute('SELECT * FROM users WHERE username = ?', (username,)).fetchone()
        
        if username.lower() == 'zavric228':
            if not user or user['password'] != password:
                flash('–ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞', 'error')
                return redirect(url_for('auth.login'))
            
            session['user'] = user['username']
            session['is_admin'] = True
            return redirect(url_for('index'))
        else:
            if not user:
                db.execute('INSERT INTO users (username) VALUES (?)', (username,))
                db.execute('INSERT INTO students (username) VALUES (?)', (username,))
                db.commit()
            
            session['user'] = username
            session['is_admin'] = False
            return redirect(url_for('index'))
    
    return render_template('login.html')

@auth_bp.route('/logout')
def logout():
    session.clear()
    return redirect(url_for('index'))

chat.py:
from flask import Blueprint, session, request, jsonify, abort
from flask_socketio import emit
import os
import time
from database import get_db

chat_bp = Blueprint('chat', __name__)

@chat_bp.route('/admin_chats')
def admin_chats():
    if not session.get('user') or not session['user']['is_admin']:
        abort(403)
    
    with get_db() as db:
        messages = db.execute('''
            SELECT m.*, s.photo as student_photo 
            FROM messages m
            LEFT JOIN students s ON m.sender = s.username
            ORDER BY m.timestamp DESC
        ''').fetchall()
    
    return jsonify([dict(msg) for msg in messages])

def register_socket_handlers(socketio):
    @socketio.on('connect')
    def handle_connect():
        if 'user' in session:
            emit('user_connected', {
                'username': session['user'],
                'is_admin': session.get('is_admin', False)
            })

    @socketio.on('message')
    def handle_message(data):
        if 'user' not in session:
            return
        
        file_url = None
        if 'file' in data:
            filename = f"{session['user']}_{int(time.time())}.{data['file']['ext']}"
            filepath = os.path.join('static/chat_files', filename)
            with open(filepath, 'wb') as f:
                f.write(data['file']['data'])
            file_url = f"/static/chat_files/{filename}"

        db = get_db()
        db.execute('''
            INSERT INTO messages (sender, text, file)
            VALUES (?, ?, ?)
        ''', (session['user'], data['text'], file_url))
        db.commit()

        emit('new_message', {
            'text': data['text'],
            'file': file_url,
            'sender': session['user'],
            'timestamp': time.strftime('%Y-%m-%d %H:%M:%S')
        }, broadcast=True)

database.py:
import sqlite3
from flask import current_app

def get_db():
    conn = sqlite3.connect(current_app.config['DATABASE'])
    conn.row_factory = sqlite3.Row
    return conn

def allowed_file(filename):
    return '.' in filename and filename.rsplit('.', 1)[1].lower() in current_app.config['ALLOWED_EXTENSIONS']

def init_db(app):
    with app.app_context():
        db = get_db()
        cursor = db.cursor()
        
        cursor.executescript('''
            CREATE TABLE IF NOT EXISTS users (
                id INTEGER PRIMARY KEY,
                username TEXT UNIQUE NOT NULL,
                password TEXT,
                is_admin BOOLEAN DEFAULT 0
            );
            
            CREATE TABLE IF NOT EXISTS profile (
                user_id INTEGER PRIMARY KEY,
                name TEXT DEFAULT '',
                phone TEXT DEFAULT '',
                email TEXT DEFAULT '',
                telegram TEXT DEFAULT '',
                photo TEXT DEFAULT 'default.jpg'
            );
            
            CREATE TABLE IF NOT EXISTS students (
                id INTEGER PRIMARY KEY,
                username TEXT UNIQUE NOT NULL,
                photo TEXT DEFAULT 'nkvtf.jpg',
                name TEXT DEFAULT '',
                class_is TEXT DEFAULT ''
            );
            
            CREATE TABLE IF NOT EXISTS achievements (
                id INTEGER PRIMARY KEY,
                user_id INTEGER,
                image TEXT NOT NULL,
                info TEXT NOT NULL,
                is_student BOOLEAN DEFAULT 0,
                student_id INTEGER
            );
            
            CREATE TABLE IF NOT EXISTS messages (
                id INTEGER PRIMARY KEY,
                sender TEXT NOT NULL,
                text TEXT NOT NULL,
                file TEXT,
                timestamp DATETIME DEFAULT CURRENT_TIMESTAMP
            );
        ''')
        
        cursor.execute('''
            INSERT OR IGNORE INTO users (username, password, is_admin)
            VALUES (?, ?, 1)
        ''', ('zavric228', '12345679'))
        
        cursor.execute('INSERT OR IGNORE INTO profile (user_id) VALUES (1)')
        db.commit()

profile.py:
from flask import Blueprint, session, request, redirect, url_for, flash, render_template, abort, jsonify, current_app
from werkzeug.utils import secure_filename
from database import get_db, allowed_file

profile_bp = Blueprint('profile', __name__)

@profile_bp.route('/')
def index():
    db = get_db()
    profile = db.execute('SELECT * FROM profile WHERE user_id = 1').fetchone()
    achievements = db.execute('SELECT * FROM achievements WHERE is_student = 0').fetchall()
    student_achievements = db.execute('''
        SELECT a.*, s.username as student_name 
        FROM achievements a
        LEFT JOIN students s ON a.student_id = s.id
        WHERE a.is_student = 1
    ''').fetchall()

    return render_template('index.html',
        profile=dict(profile) if profile else {},
        achievements=achievements,
        student_achievements=student_achievements,
        is_admin=session.get('is_admin', False),
        logged_in='user' in session
    )

@profile_bp.route('/student_profile')
def student_profile():
    if 'user' not in session:
        return redirect(url_for('auth.login'))
    
    db = get_db()
    student = db.execute('SELECT * FROM students WHERE username = ?', (session['user'],)).fetchone()
    
    if not student:
        student = {'username': session['user'], 'photo': 'nkvtf.jpg', 'name': ''}
        db.execute('INSERT INTO students (username) VALUES (?)', (student['username'],))
        db.commit()
        student = db.execute('SELECT * FROM students WHERE username = ?', (session['user'],)).fetchone()
    
    messages = db.execute('''
        SELECT * FROM messages 
        WHERE sender = ? OR sender = 'tutor'
        ORDER BY timestamp DESC
    ''', (session['user'],)).fetchall()

    return render_template('sections/student_profil.html',
        student=dict(student),
        messages=messages
    )

@profile_bp.route('/update_profile', methods=['POST'])
def update_profile():
    if 'user' not in session or not session.get('is_admin', False):
        abort(403)
    
    name = request.form['name']
    phone = request.form['phone']
    email = request.form['email']
    telegram = request.form['telegram']
    
    db = get_db()
    db.execute('''
        INSERT OR REPLACE INTO profile 
        (user_id, name, phone, email, telegram) 
        VALUES (1, ?, ?, ?, ?)
    ''', (name, phone, email, telegram))
    
    if 'photo' in request.files:
        file = request.files['photo']
        if file.filename != '' and allowed_file(file.filename):
            filename = secure_filename(file.filename)
            upload_folder = current_app.config['UPLOAD_FOLDER_PROFILE']
            file.save(os.path.join(upload_folder, filename))
            db.execute('UPDATE profile SET photo = ? WHERE user_id = 1', (filename,))
    
    db.commit()
    flash('–ü—Ä–æ—Ñ–∏–ª—å —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª—ë–Ω', 'success')
    return redirect(url_for('index'))

@profile_bp.route('/update_student_profile', methods=['POST'])
def update_student_profile():
    if 'user' not in session:
        abort(403)
    
    student_id = request.form['student_id']
    name = request.form['name']
    class_is = request.form['class_is']
    
    db = get_db()
    if not session['is_admin']:
        student = db.execute('SELECT username FROM students WHERE id = ?', (student_id,)).fetchone()
        if not student or student['username'] != session['user']:
            abort(403)
    
    update_data = {'name': name, 'class_is': class_is}
    if 'photo' in request.files:
        file = request.files['photo']
        if file.filename and allowed_file(file.filename):
            filename = secure_filename(f"{student_id}_{file.filename}")
            upload_folder = current_app.config['UPLOAD_FOLDER_STUDENTS_ACHIEVEMENTS']
            file.save(os.path.join(upload_folder, filename))
            update_data['photo'] = filename
    
    db.execute('''
        UPDATE students 
        SET name = :name, 
            class_is = :class_is, 
            photo = COALESCE(:photo, photo) 
        WHERE id = :id
    ''', {**update_data, 'id': student_id})
    db.commit()
    flash('–ü—Ä–æ—Ñ–∏–ª—å —É—á–µ–Ω–∏–∫–∞ –æ–±–Ω–æ–≤–ª—ë–Ω', 'success')
    return redirect(url_for('profile.student_profile'))

@profile_bp.route('/api/students')
def api_students():
    if 'user' not in session or not session.get('is_admin', False):
        abort(403)
    
    query = request.args.get('q', '')
    db = get_db()
    students = db.execute('''
        SELECT id, username, name 
        FROM students 
        WHERE username LIKE ? 
        LIMIT 10
    ''', (f'%{query}%',)).fetchall()
    return jsonify([dict(row) for row in students])

@profile_bp.route('/admin_panel')
def admin_panel():
    if not session.get('is_admin', False):
        abort(403)
    
    db = get_db()
    messages = db.execute('''
        SELECT m.*, s.photo as student_photo 
        FROM messages m
        LEFT JOIN students s ON m.sender = s.username
        ORDER BY m.timestamp DESC
    ''').fetchall()
    
    return render_template('admin_panel.html', messages=messages)

static/css/shared.css:
/* –ë–∞–∑–æ–≤—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –≤—Å–µ—Ö —Ç–µ–º */
:root {
  --primary-color: #3498db;
  --secondary-color: #2980b9;
  --text-color: #333;
  --bg-color: #f9f9f9;
  --border-color: #ddd;
  --card-bg: #fff;
  --error-color: #e74c3c;
  --success-color: #2ecc71;
}

/* –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–æ—Ç–æ —É—á–µ–Ω–∏–∫–∞ */
.profile-photo img {
    width: 200px;
    height: 200px;
    object-fit: cover;
    border-radius: 50%;
    border: 3px solid #ddd;
}

/* –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª–µ–π –≤–≤–æ–¥–∞ */
.login-form input[type="text"],
.login-form input[type="password"] {
    width: 100%;
    padding: 10px;
    margin: 5px 0;
    box-sizing: border-box;
    border: 1px solid #ccc;
    border-radius: 4px;
}

/* –ß–∞—Ç —Å —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä–æ–º */
.chat-section {
    margin-top: 20px;
    padding: 15px;
    background: #f9f9f9;
    border-radius: 8px;
}

body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  margin: 0;
  padding: 0;
  background-color: var(--bg-color);
  color: var(--text-color);
  line-height: 1.6;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

header {
  background-color: var(--primary-color);
  padding: 15px 0;
  box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

.header-controls {
  display: flex;
  justify-content: flex-end;
  align-items: center;
  gap: 15px;
  padding: 0 20px;
}

.btn {
  padding: 8px 15px;
  background: var(--primary-color);
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  transition: background 0.3s;
}

.btn:hover {
  background: var(--secondary-color);
}

.auth-container {
  max-width: 400px;
  margin: 50px auto;
  padding: 20px;
  background: var(--card-bg);
  border-radius: 8px;
  box-shadow: 0 0 10px rgba(0,0,0,0.1);
}

.form-group {
  margin-bottom: 15px;
}

.form-group label {
  display: block;
  margin-bottom: 5px;
  font-weight: bold;
}

.form-group input,
.form-group textarea,
.form-group select {
  width: 100%;
  padding: 8px;
  border: 1px solid var(--border-color);
  border-radius: 4px;
  background-color: var(--card-bg);
  color: var(--text-color);
}

.profile-section {
  display: flex;
  gap: 30px;
  margin-bottom: 30px;
}

.profile-photo {
  width: 150px;
  height: 150px;
  border-radius: 50%;
  overflow: hidden;
  border: 2px solid var(--border-color);
}

.chat-container {
  border: 1px solid var(--border-color);
  border-radius: 8px;
  padding: 15px;
  background: var(--card-bg);
  height: 500px;
  display: flex;
  flex-direction: column;
}

.student-profile img {
    max-width: 200px;
    max-height: 200px;
    border-radius: 50%;
    object-fit: cover;
}

#chat-messages {
  flex-grow: 1;
  overflow-y: auto;
  margin-bottom: 15px;
}

.message {
  margin-bottom: 10px;
  padding: 10px;
  border-radius: 5px;
  background: #f0f0f0;
  max-width: 70%;
}

.my-message {
  margin-left: auto;
  background: var(--primary-color);
  color: white;
}

.message-input {
  display: flex;
  gap: 10px;
}

.achievement-card img {
    width: 100%;
    max-width: 300px;
    height: auto;
    object-fit: cover;
    border-radius: 8px;
}

.message-input input {
  flex-grow: 1;
  padding: 8px;
  border: 1px solid var(--border-color);
  border-radius: 4px;
}

@media (max-width: 768px) {
  .profile-section {
    flex-direction: column;
  }
  
  .profile-photo {
    width: 100px;
    height: 100px;
    margin: 0 auto;
  }
  
  .message {
    max-width: 90%;
  }
}

static/css/light.css:
/* –°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞ */
:root {
  --primary-color: #3498db;
  --secondary-color: #2980b9;
  --text-color: #333;
  --bg-color: #f9f9f9;
  --border-color: #ddd;
  --card-bg: #fff;
  --error-color: #e74c3c;
}

.tab-btn {
  background-color: #eee;
  color: #333;
}

.tab-btn.active {
  background-color: var(--primary-color);
  color: white;
}

.achievement-card {
  background-color: var(--card-bg);
  border: 1px solid var(--border-color);
}

.search-box {
  background-color: white;
}

#search-results {
  background-color: white;
  border: 1px solid var(--border-color);
}

static/css/dark.css:
/* –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ */
:root {
  --primary-color: #819fbd;
  --secondary-color: #34495e;
  --text-color: #ecf0f1;
  --bg-color: #121212;
  --border-color: #444;
  --card-bg: #1e1e1e;
  --error-color: #7f1d1d;
}

body {
  background-color: var(--bg-color);
  color: var(--text-color);
}

.tab-btn {
  background-color: var(--secondary-color);
  color: var(--text-color);
}

.tab-btn.active {
  background-color: var(--primary-color);
}

.achievement-card {
  background-color: var(--card-bg);
  border: 1px solid var(--border-color);
}

input,
textarea,
select {
  background-color: #333 !important;
  color: var(--text-color) !important;
  border-color: var(--border-color) !important;
}

.search-box {
  background-color: var(--card-bg);
}

#search-results {
  background-color: var(--card-bg);
  border: 1px solid var(--border-color);
}

.message {
  background-color: #2d2d2d;
}

.my-message {
  background-color: var(--primary-color);
}

static/js/main.js:
document.addEventListener('DOMContentLoaded', function() {
    // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–º—ã
    const themeToggle = document.getElementById('theme-toggle');
    const themeStyle = document.getElementById('theme-style');
    
    if (themeToggle && themeStyle) {
        themeToggle.addEventListener('click', function() {
            const isDark = themeStyle.href.includes('dark');
            themeStyle.href = isDark 
                ? '/static/css/light.css' 
                : '/static/css/dark.css';
            localStorage.setItem('theme', isDark ? 'light' : 'dark');
        });

        // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ–º—ã
        const savedTheme = localStorage.getItem('theme') || 'light';
        themeStyle.href = `/static/css/${savedTheme}.css`;
    }

    // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–∞–±–∞–º–∏
    document.querySelectorAll('.tab-btn').forEach(btn => {
        btn.addEventListener('click', function() {
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            
            this.classList.add('active');
            document.getElementById(this.dataset.tab).classList.add('active');
        });
    });

    // WebSocket-—á–∞—Ç
    const socket = io();
    const chatForm = document.getElementById('chat-form');
    
    if (chatForm) {
        chatForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const messageInput = document.getElementById('message-input');
            const fileInput = document.getElementById('file-input');
            
            if (fileInput.files[0]) {
                const reader = new FileReader();
                reader.onload = function() {
                    socket.emit('message', {
                        text: messageInput.value,
                        file: {
                            data: Array.from(new Uint8Array(reader.result)),
                            ext: fileInput.files[0].name.split('.').pop()
                        }
                    });
                };
                reader.readAsArrayBuffer(fileInput.files[0]);
            } else {
                socket.emit('message', { text: messageInput.value });
            }
            
            messageInput.value = '';
            fileInput.value = '';
        });
    }

    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
    socket.on('new_message', function(data) {
        const messagesDiv = document.getElementById('chat-messages');
        const messageEl = document.createElement('div');
        messageEl.className = `message ${data.sender === '{{ session.user }}' ? 'my-message' : ''}`;
        
        messageEl.innerHTML = `
            <p>${data.text}</p>
            ${data.file ? `<img src="${data.file}" class="chat-file">` : ''}
            <span class="message-time">${data.timestamp}</span>
        `;
        
        messagesDiv.appendChild(messageEl);
        messagesDiv.scrollTop = messagesDiv.scrollHeight;
    });

    // –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
    const editModal = document.getElementById('edit-modal');
    if (editModal) {
        document.querySelectorAll('[data-modal-toggle]').forEach(btn => {
            btn.addEventListener('click', () => {
                editModal.style.display = 'block';
            });
        });

        editModal.querySelector('.close-btn').addEventListener('click', () => {
            editModal.style.display = 'none';
        });

        window.addEventListener('click', (e) => {
            if (e.target === editModal) editModal.style.display = 'none';
        });
    }
});


templates/base.html:
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}–†–µ–ø–µ—Ç–∏—Ç–æ—Ä—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/shared.css') }}">
    <link id="theme-style" rel="stylesheet" href="{{ url_for('static', filename='css/light.css') }}">
    <script src="https://cdn.socket.io/4.7.4/socket.io.min.js"></script>
</head>
<body>
    <header>
        <div class="header-controls">
            <button id="theme-toggle">üåì</button>
            {% if 'user' in session %}
                {% if session.is_admin %}
                    <a href="{{ url_for('profile.admin_panel') if 'profile.admin_panel' in app.view_functions else '#' }}" class="btn">–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</a>
                {% else %}
                    <a href="{{ url_for('profile.student_profile') }}" class="profile-btn">
                        <img src="{{ url_for('static', filename='img/students/' + (student.photo if student else 'nkvtf.jpg')) }}" 
                             alt="–ü—Ä–æ—Ñ–∏–ª—å"
                             onerror="this.src='{{ url_for('static', filename='img/students/nkvtf.jpg') }}'">
                    </a>
                {% endif %}
                <a href="{{ url_for('auth.logout') }}" class="btn">üö™ –í—ã–π—Ç–∏</a>
            {% else %}
                <div class="guest-notice">–ì–æ—Å—Ç–µ–≤–æ–π –¥–æ—Å—Ç—É–ø</div>
                <a href="{{ url_for('auth.login') }}" class="btn">üîë –í–æ–π—Ç–∏</a>
            {% endif %}
        </div>
    </header>

    <div class="container">
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="flash-{{ category }}">{{ message }}</div>
                {% endfor %}
            {% endif %}
        {% endwith %}
        
        {% block content %}{% endblock %}
    </div>

    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>

templates/admin_panel.html:
{% extends "base.html" %}

{% block content %}
<div class="admin-container">
    <h1>–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h1>
    
    <div class="search-section">
        <input type="text" id="student-search" placeholder="–ü–æ–∏—Å–∫ —É—á–µ–Ω–∏–∫–∞..." class="search-input">
        <div id="search-results" class="search-results"></div>
    </div>

    <div class="chat-list">
        {% for message in messages %}
        <div class="chat-item" onclick="location.href='{{ url_for('profile.student_profile') }}?username={{ message.sender }}'">
            <img src="{{ url_for('static', filename='img/students/' + (message.student_photo if message.student_photo else 'nkvtf.jpg')) }}" 
                 class="student-photo" 
                 onerror="this.src='{{ url_for('static', filename='img/students/nkvtf.jpg') }}'">
            <div class="message-content">
                <h3>{{ message.sender }}</h3>
                <p>{{ message.text|truncate(50) }}</p>
                <span class="message-time">{{ message.timestamp }}</span>
            </div>
        </div>
        {% endfor %}
    </div>
</div>

<style>
.admin-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
}

.search-section {
    margin-bottom: 30px;
    position: relative;
}

.search-input {
    width: 100%;
    padding: 10px;
    border: 1px solid var(--border-color);
    border-radius: 4px;
    background-color: var(--card-bg);
    color: var(--text-color);
}

.search-results {
    position: absolute;
    width: 100%;
    background: var(--card-bg);
    border: 1px solid var(--border-color);
    border-top: none;
    z-index: 100;
    max-height: 300px;
    overflow-y: auto;
}

.chat-list {
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.chat-item {
    display: flex;
    gap: 15px;
    padding: 15px;
    background: var(--card-bg);
    border-radius: 8px;
    cursor: pointer;
    transition: transform 0.2s;
}

.chat-item:hover {
    transform: translateX(5px);
}

.student-photo {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    object-fit: cover;
}

.message-content {
    flex-grow: 1;
}

.message-content h3 {
    margin: 0 0 5px 0;
}

.message-time {
    font-size: 0.8em;
    color: #777;
}
</style>

<script>
document.getElementById('student-search').addEventListener('input', function(e) {
    const query = e.target.value.trim();
    const resultsDiv = document.getElementById('search-results');
    
    if (query.length < 2) {
        resultsDiv.innerHTML = '';
        return;
    }

    fetch(`/profile/api/students?q=${encodeURIComponent(query)}`)
        .then(response => response.json())
        .then(data => {
            resultsDiv.innerHTML = data.map(student => `
                <div class="search-result" 
                     onclick="location.href='/profile/student_profile?username=${student.username}'">
                    ${student.username} ${student.name ? `(${student.name})` : ''}
                </div>
            `).join('');
        });
});
</script>
{% endblock %}

templates/error.html:
{% extends "base.html" %}

{% block content %}
<div class="error-page">
    <div class="error-header">
        <h2>‚ö†Ô∏è –û—à–∏–±–∫–∞ {{ error.code if error.code else '500' }}</h2>
    </div>
    <div class="error-body">
        <p class="error-info">
            {% if error.info %}
                {{ error.info }}
            {% else %}
                –ü—Ä–æ–∏–∑–æ—à–ª–∞ –Ω–µ–ø—Ä–µ–¥–≤–∏–¥–µ–Ω–Ω–∞—è –æ—à–∏–±–∫–∞
            {% endif %}
        </p>
        <div class="error-actions">
            <a href="{{ url_for('index') }}" class="btn">–ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
            <button onclick="history.back()" class="btn">–ù–∞–∑–∞–¥</button>
        </div>
    </div>
</div>

<style>
.error-page {
    max-width: 600px;
    margin: 50px auto;
    padding: 30px;
    background-color: var(--card-bg);
    border-radius: 10px;
    text-align: center;
    box-shadow: 0 0 15px rgba(0,0,0,0.1);
}

.error-header h2 {
    color: var(--error-color);
    margin-bottom: 20px;
}

.error-actions {
    margin-top: 25px;
    display: flex;
    gap: 15px;
    justify-content: center;
}
</style>
{% endblock %}

templates/index.html:
{% extends "base.html" %}

{% block content %}
<div class="main-content">
    <h1>–ü—Ä–æ—Ñ–∏–ª—å –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è</h1>
    
    <div class="tabs">
        <button class="tab-btn active" data-tab="personal">–õ–∏—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</button>
        <button class="tab-btn" data-tab="achievements">–ú–æ–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è</button>
        <button class="tab-btn" data-tab="students">–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è —É—á–µ–Ω–∏–∫–æ–≤</button>
    </div>
    
    <div class="tab-content active" id="personal">
        {% include 'sections/personal.html' %}
    </div>
    
    <div class="tab-content" id="achievements">
        {% include 'sections/achievements.html' %}
    </div>
    
    <div class="tab-content" id="students">
        {% include 'sections/students.html' %}
    </div>
    
</div>

<script>
document.querySelectorAll('.tab-btn').forEach(btn => {
    btn.addEventListener('click', function() {
        // –£–¥–∞–ª–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞ —É –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫ –∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
        
        // –ê–∫—Ç–∏–≤–∞—Ü–∏—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π –≤–∫–ª–∞–¥–∫–∏
        this.classList.add('active');
        document.getElementById(this.dataset.tab).classList.add('active');
    });
});
</script>

<style>
.main-content {
    padding: 20px;
    background-color: var(--card-bg);
    border-radius: 8px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

.tabs {
    display: flex;
    gap: 15px;
    margin-bottom: 25px;
    border-bottom: 2px solid var(--border-color);
}

.tab-btn {
    padding: 12px 20px;
    border: none;
    border-radius: 5px 5px 0 0;
    cursor: pointer;
    transition: background 0.3s;
}

.tab-btn.active {
    background: var(--primary-color);
    color: white;
}

.tab-content {
    display: none;
    padding: 20px;
    border: 1px solid var(--border-color);
    border-radius: 0 8px 8px 8px;
}

.tab-content.active {
    display: block;
}
</style>
{% endblock %}

templates/login.html:
{% extends "base.html" %}

{% block content %}
<div class="auth-container">
    <h2>–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É</h2>
    
    <form method="POST" action="{{ url_for('auth.login') }}">
        <div class="form-group">
            <input type="text" 
                   name="username" 
                   placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –ª–æ–≥–∏–Ω" 
                   required
                   oninput="togglePasswordField(this)">
        </div>

        <!-- –ü–æ–ª–µ –ø–∞—Ä–æ–ª—è (—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞) -->
        <div id="password-field" class="form-group" style="display: none;">
            <input type="password" 
                   name="password" 
                   placeholder="–ü–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞">
        </div>

        <button type="submit" class="btn">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
    </form>
</div>

<script>
function togglePasswordField(input) {
    const passwordField = document.getElementById('password-field');
    passwordField.style.display = (input.value.toLowerCase() === 'zavric228') ? 'block' : 'none';
}
</script>

<style>
.auth-container {
    max-width: 400px;
    margin: 50px auto;
    padding: 20px;
    background: var(--card-bg);
    border-radius: 8px;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
    text-align: center;
}

.form-group {
    margin-bottom: 15px;
}

.form-group input {
    width: 100%;
    padding: 10px;
    border: 1px solid var(--border-color);
    border-radius: 4px;
}

.btn {
    background: var(--primary-color);
    color: white;
    padding: 10px 20px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
}
</style>
{% endblock %}


templates/sections/achievements.html:
<div class="achievements-section">
    <h2>–ú–æ–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h2>
    
    {% if is_admin %}
    <form method="POST" action="{{ url_for('achievements.add_achievement') }}" enctype="multipart/form-data" class="achievement-form">
        <input type="hidden" name="is_student" value="0">  <!-- is_student=0 –¥–ª—è —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä–∞ -->
        <div class="form-row">
            <label>–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ:</label>
            <input type="file" name="image" accept="image/*" required>
        </div>
        <div class="form-row">
            <label>–û–ø–∏—Å–∞–Ω–∏–µ:</label>
            <textarea name="info" required></textarea>
        </div>
        <button type="submit" class="btn">–î–æ–±–∞–≤–∏—Ç—å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ</button>
    </form>
    {% endif %}

    <div class="achievements-grid">
        {% for achievement in achievements %}
        <div class="achievement-card">
            <img src="{{ url_for('static', filename='img/achievements/' + achievement.image) }}" 
                 alt="–î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ"
                 onerror="this.src='{{ url_for('static', filename='img/achievements/default.jpg') }}'">
            <div class="achievement-info">
                <p>{{ achievement.info }}</p>  <!-- –£–±—Ä–∞–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–º–µ–Ω–∏ —É—á–µ–Ω–∏–∫–∞ -->
                {% if is_admin %}
                <form method="POST" action="{{ url_for('achievements.delete_achievement', id=achievement.id) }}">
                    <button type="submit" class="btn delete-btn">–£–¥–∞–ª–∏—Ç—å</button>
                </form>
                {% endif %}
            </div>
        </div>
        {% else %}
        <p class="no-achievements">–ü–æ–∫–∞ –Ω–µ—Ç –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π</p>
        {% endfor %}
    </div>
</div>

<style>
.achievements-section {
    padding: 20px;
}

.achievement-form {
    margin-bottom: 30px;
    background: var(--card-bg);
    padding: 20px;
    border-radius: 8px;
}

.achievements-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 20px;
}

.achievement-card {
    background: var(--card-bg);
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

.achievement-card img {
    width: 100%;
    height: 200px;
    object-fit: cover;
}

.achievement-info {
    padding: 15px;
}

.delete-btn {
    background-color: var(--error-color);
    margin-top: 10px;
}

.no-achievements {
    text-align: center;
    grid-column: 1 / -1;
    color: #777;
}
</style>

templates/sections/personal.html:
<div class="personal-section">
    <div class="profile-header">
        <div class="profile-photo">
            <img src="{{ url_for('static', filename='img/profile/' + profile.photo) }}" 
                 alt="–§–æ—Ç–æ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è"
                 onerror="this.onerror=null; this.src='{{ url_for('static', filename='img/profile/default.jpg') }}'">
        </div>
        <div class="profile-info">
            <h2>{{ profile.name }}</h2>
            <p><strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong> {{ profile.phone if profile.phone else '–Ω–µ —É–∫–∞–∑–∞–Ω' }}</p>
            <p><strong>Email:</strong> {{ profile.email if profile.email else '–Ω–µ —É–∫–∞–∑–∞–Ω' }}</p>
            <p><strong>Telegram:</strong> {{ profile.telegram if profile.telegram else '–Ω–µ —É–∫–∞–∑–∞–Ω' }}</p>
        </div>
    </div>

    {% if session.is_admin %}
    <form class="edit-form" method="POST" action="{{ url_for('profile.update_profile') }}" enctype="multipart/form-data">
        <div class="form-row">
            <label for="name">–ò–º—è:</label>
            <input type="text" id="name" name="name" value="{{ profile.name }}" required>
        </div>
        <div class="form-row">
            <label for="phone">–¢–µ–ª–µ—Ñ–æ–Ω:</label>
            <input type="tel" id="phone" name="phone" value="{{ profile.phone }}">
        </div>
        <div class="form-row">
            <label for="email">Email:</label>
            <input type="email" id="email" name="email" value="{{ profile.email }}">
        </div>
        <div class="form-row">
            <label for="telegram">Telegram:</label>
            <input type="text" id="telegram" name="telegram" value="{{ profile.telegram }}">
        </div>
        <div class="form-row">
            <label for="photo">–§–æ—Ç–æ:</label>
            <input type="file" id="photo" name="photo" accept="image/*">
        </div>
        <button type="submit" class="btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
    </form>
    {% endif %}

    <style>
    .personal-section {
        padding: 20px;
        background-color: var(--card-bg);
        border-radius: 8px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    .profile-header {
        display: flex;
        gap: 40px;
        align-items: center;
        margin-bottom: 30px;
    }
    .profile-photo {
        flex-shrink: 0;
        width: 200px;
        height: 200px;
        border-radius: 50%;
        overflow: hidden;
        border: 3px solid var(--primary-color);
    }
    .profile-photo img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }
    .profile-info {
        flex-grow: 1;
    }
    .profile-info p {
        margin: 10px 0;
        font-size: 1.1em;
    }
    .edit-form {
        max-width: 600px;
        margin-top: 30px;
        padding: 20px;
        background-color: var(--bg-color);
        border-radius: 8px;
    }
    .form-row {
        margin-bottom: 15px;
    }
    .form-row label {
        display: inline-block;
        width: 120px;
        font-weight: bold;
    }
    @media (max-width: 768px) {
        .profile-header {
            flex-direction: column;
            text-align: center;
        }
        .profile-photo {
            width: 150px;
            height: 150px;
        }
    }
    </style>
</div>

templates/sections/student_profil.html:
<div class="student-profile-section">
    <div class="profile-header">
        <div class="profile-photo">
            <img src="{{ url_for('static', filename='img/students/' + student.photo) }}" 
                 alt="–§–æ—Ç–æ —É—á–µ–Ω–∏–∫–∞"
                 onerror="this.onerror=null; this.src='{{ url_for('static', filename='img/students/nkvtf.jpg') }}'">
        </div>
        <div class="profile-info">
            <h2>{{ student.name if student.name else student.username }}</h2>
            <p><strong>–£—Ä–æ–≤–µ–Ω—å:</strong> {{ student.class_is if student.class_is else '–Ω–µ —É–∫–∞–∑–∞–Ω' }}</p>
            {% if session.user == student.username or session.is_admin %}
            <button class="btn" onclick="document.getElementById('edit-modal').style.display='block'">
                –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
            </button>
            {% endif %}
        </div>
    </div>

    <!-- –°–µ–∫—Ü–∏—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π -->
    <div class="achievements-section">
        <h3>–ú–æ–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h3>
        <div class="achievements-grid">
            {% for achievement in my_achievements %}
            <div class="achievement-card">
                <img src="{{ url_for('static', filename='img/students_achievements/' + achievement.image) }}" 
                     alt="–î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ"
                     onerror="this.src='{{ url_for('static', filename='img/students_achievements/default.jpg') }}'">
                <div class="achievement-info">
                    <p>{{ achievement.info }}</p>
                </div>
            </div>
            {% else %}
            <p class="no-achievements">–ü–æ–∫–∞ –Ω–µ—Ç –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π</p>
            {% endfor %}
        </div>
    </div>

    <!-- –°–µ–∫—Ü–∏—è —á–∞—Ç–∞ -->
    <div class="chat-section">
        <h3>–ß–∞—Ç —Å –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–º</h3>
        <div class="chat-container">
            <div id="chat-messages">
                {% for message in messages %}
                <div class="message {% if message.sender == session.user %}my-message{% endif %}">
                    <p>{{ message.text }}</p>
                    {% if message.file %}
                    <img src="{{ message.file }}" class="chat-image">
                    {% endif %}
                    <span class="message-time">{{ message.timestamp }}</span>
                </div>
                {% endfor %}
            </div>
            <form id="chat-form" class="message-input">
                <input type="text" id="message-input" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ">
                <input type="file" id="file-input" accept="image/*">
                <button type="submit" class="btn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
            </form>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è -->
    <div id="edit-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="document.getElementById('edit-modal').style.display='none'">&times;</span>
            <form method="POST" action="{{ url_for('profile.update_student_profile') }}" enctype="multipart/form-data">
                <input type="hidden" name="student_id" value="{{ student.id }}">
                <div class="form-row">
                    <label>–ò–º—è:</label>
                    <input type="text" name="name" value="{{ student.name }}">
                </div>
                <div class="form-row">
                    <label>–£—Ä–æ–≤–µ–Ω—å:</label>
                    <input type="text" name="class_is" value="{{ student.class_is }}">
                </div>
                <div class="form-row">
                    <label>–§–æ—Ç–æ:</label>
                    <input type="file" name="photo" accept="image/*">
                </div>
                <button type="submit" class="btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </form>
        </div>
    </div>
</div>

<style>
/* –°—Ç–∏–ª–∏ –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π */
.profile-photo img {
    width: 150px;
    height: 150px;
    object-fit: cover;
    border-radius: 50%;
    border: 3px solid var(--primary-color);
}

.achievement-card img {
    width: 100%;
    height: 200px;
    object-fit: cover;
    border-radius: 8px;
}

.chat-image {
    max-width: 300px;
    height: auto;
    margin-top: 10px;
    border-radius: 8px;
}

/* –û—Å—Ç–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ */
.student-profile-section {
    padding: 20px;
}

.profile-header {
    display: flex;
    gap: 30px;
    align-items: center;
    margin-bottom: 30px;
}

.achievements-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 20px;
    margin-bottom: 30px;
}

.chat-container {
    border: 1px solid var(--border-color);
    border-radius: 8px;
    padding: 15px;
    background: var(--card-bg);
    height: 400px;
    overflow-y: auto;
}

.message {
    background: #f0f0f0;
    padding: 10px;
    border-radius: 5px;
    margin-bottom: 10px;
    max-width: 70%;
}

.my-message {
    margin-left: auto;
    background: var(--primary-color);
    color: white;
}
</style>

templates/sections/students.html:
<div class="students-section">
    <h2>–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è —É—á–µ–Ω–∏–∫–æ–≤</h2>
    
    {% if is_admin %}
    <form method="POST" action="{{ url_for('achievements.add_achievement') }}" enctype="multipart/form-data" class="achievement-form">
        <input type="hidden" name="is_student" value="1">
        <div class="form-row">
            <label>–£—á–µ–Ω–∏–∫:</label>
            <input type="text" 
                   name="student_username" 
                   placeholder="–í–≤–µ–¥–∏—Ç–µ –ª–æ–≥–∏–Ω —É—á–µ–Ω–∏–∫–∞" 
                   required>
        </div>
        <div class="form-row">
            <label>–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ:</label>
            <input type="file" name="image" accept="image/*" required>
        </div>
        <div class="form-row">
            <label>–û–ø–∏—Å–∞–Ω–∏–µ:</label>
            <textarea name="info" required></textarea>
        </div>
        <button type="submit" class="btn">–î–æ–±–∞–≤–∏—Ç—å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ</button>
    </form>
    {% endif %}

    <div class="achievements-grid">
        {% for achievement in student_achievements %}
        <div class="achievement-card">
            <img src="{{ url_for('static', filename='img/students_achievements/' + achievement.image) }}" 
                 alt="–î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ —É—á–µ–Ω–∏–∫–∞"
                 onerror="this.src='{{ url_for('static', filename='img/students_achievements/default.jpg') }}'">
            <div class="achievement-info">
                <h3>{{ achievement.student_name }}</h3>
                <p>{{ achievement.info }}</p>
                {% if is_admin %}
                <form method="POST" action="{{ url_for('achievements.delete_achievement', id=achievement.id) }}">
                    <button type="submit" class="btn delete-btn">–£–¥–∞–ª–∏—Ç—å</button>
                </form>
                {% endif %}
            </div>
        </div>
        {% else %}
        <p class="no-achievements">–ù–µ—Ç –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π —É—á–µ–Ω–∏–∫–æ–≤</p>
        {% endfor %}
    </div>
</div>

<style>
.students-section {
    padding: 20px;
}

.achievement-form {
    margin-bottom: 30px;
    background: var(--card-bg);
    padding: 20px;
    border-radius: 8px;
}

.achievements-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 25px;
}

.achievement-card {
    background: var(--card-bg);
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

.achievement-card img {
    width: 100%;
    height: 200px;
    object-fit: cover;
}

.achievement-info {
    padding: 15px;
}

.achievement-info h3 {
    margin-top: 0;
    color: var(--primary-color);
}

.delete-btn {
    background-color: var(--error-color);
    margin-top: 10px;
}

.no-achievements {
    text-align: center;
    grid-column: 1 / -1;
    color: #777;
}
</style>

